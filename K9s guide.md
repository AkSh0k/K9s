# Описание
**K9s** — это **терминальный интерфейс (TUI) для Kubernetes**, который позволяет удобно управлять кластерами прямо из терминала.  
Он позволяет графически отслеживать состояние всех ресурсов (pods, deployments, services и т.д.) в реальном времени и даёт быстрый доступ к логам, описаниям, метрикам, подключение в контейнер и другим операциям.

Стоит отметить, что K9s работает поверх `kubectl` (официальный CLI-клиент Kubernetes) и использует уже готовый `kubeconfig`.
Данный TUI-интерфейс не заменяет `kubectl`, а просто предоставляет более наглядный и интерактивный способ управления ресурсами кластера.
### Основные возможности:
- просмотр всех ресурсов Kubernetes в режиме реального времени
- запуск команд типа `kubectl describe`, `kubectl logs`, `kubectl exec` без ручного ввода (через терминальный UI)
- фильтры, поиск, горячие клавиши
- управление несколькими контекстами
- перезапуск, удаление, отладка pod’ов
---
# Установка
## Предварительные требования
#### Перед установкой K9s необходимо иметь:
1. Доступ к Kubernetes-кластеру 
2. Установленный `kubectl`
3. Корректный `kubeconfig`

K9s **не выполняет настройку кластера** и использует существующий `kubeconfig` для подключения к *Kubernetes API*.
## Установка K9s
### 1. Скачать последнюю версию
```bash
sudo dnf install k9s
```
### 2. Проверка
```bash
k9s version
```
![[7. k9s version.png]]


---
# Начало работы с K9s
```bash
k9s
```
Что происходит:
- читается `~/.kube/config`
- подключение к текущему контексту
- загрузка ресурсов кластера  
## Структура интерфейса K9s
![8. k9s](</images/8. k9s.png>)
### Интерфейс состоит из:
1. **Главной таблицы ресурсов**
2. **Командная строка (command prompt) `:`**
3. **Горячие клавиши**
4. **Статус-бар (внизу)**

### Навигация:
- ↑ ↓ — перемещение
- `Enter` — переход внутрь ресурса
- `Esc` — назад
- `Ctrl + C` — выход из K9s

---

## Основные режимы и команды
Для ввода команды необходимо нажать `:`, после чего откроется командная строка K9s:
![9. com prompt](</images/9. com prompt.png>)

Ниже представлен список всех поддерживаемых команд для отображения таблиц ресурсов и прочих данных:

| Команда   | Что отображает         |
| --------- | ---------------------- |
| `:po`     | Pods                   |
| `:deploy` | Deployments            |
| `:svc`    | Services               |
| `:ns`     | Namespaces             |
| `:ctx`    | Contexts               |
| `:node`   | Nodes                  |
| `:rs`     | ReplicaSets            |
| `:sts`    | StatefulSets           |
| `:ds`     | DaemonSets             |
| `:job`    | Jobs                   |
| `:cj`     | CronJobs               |
| `:ing`    | Ingress                |
| `:cm`     | ConfigMaps             |
| `:sec`    | Secrets                |
| `:pvc`    | PersistentVolumeClaims |
| `:pv`     | PersistentVolumes      |

---

## Работа с Pod

Находясь в списке pod’ов:

|Клавиша|Действие|
|---|---|
|`l`|Logs|
|`s`|Shell (exec внутрь контейнера)|
|`d`|Describe|
|`y`|YAML|
|`e`|Edit|
|`r`|Restart|
|`x`|Delete|
|`c`|Переключение контейнера|
|`Ctrl+l`|Очистить экран|

Пример: 
`:po → выбрать pod → l`

---
# Типовые сценарии использования K9s

Данный раздел описывает практические примеры использования K9s при повседневной работе с Kubernetes-кластером. Приведённые сценарии отражают наиболее частые задачи администрирования и диагностики и демонстрируют преимущества интерактивного терминального интерфейса.
## 1. Отладка pod’а, завершившегося с ошибкой
Одной из наиболее распространённых задач является анализ pod’ов, находящихся в состояниях `CrashLoopBackOff`, `Error` или `Pending`.

В K9s это выполняется следующим образом:
- переход в список pod’ов (`:po`);
- выбор pod’а с некорректным состоянием;
- просмотр журналов работы контейнера (`l`);
- при необходимости — просмотр подробного описания ресурса (`d`).

Такой подход позволяет быстро определить причину сбоя (ошибка приложения, нехватка ресурсов, проблемы с образом контейнера) без последовательного ввода нескольких команд `kubectl`.

## 2. Просмотр журналов работы контейнеров в режиме реального времени
При запуске и отладке приложений часто требуется наблюдать журналы контейнера по мере их появления.

K9s предоставляет возможность непрерывного просмотра журналов:
- выбор pod’а;
- переход в режим просмотра журналов (`l`).

Журналы обновляются автоматически, что позволяет оперативно отслеживать поведение приложения без повторного выполнения команд.

## 3. Подключение к контейнеру для диагностики
В ряде случаев требуется проверить файловую систему контейнера, переменные окружения или доступность сетевых ресурсов.

Для этого в K9s предусмотрено подключение к контейнеру:
- выбор pod’а;
- переход в интерактивную сессию контейнера (`s`).

Выход из интерактивной сессии осуществляется с помощью сочетания клавиш `Ctrl + D`.

Следует учитывать, что не все pod’ы (в частности, системные) поддерживают интерактивный режим работы.

## 4. Перезапуск Deployment без повторного применения манифестов
После изменения конфигурации или устранения ошибок может потребоваться перезапуск всех pod’ов, управляемых Deployment.

В K9s это выполняется следующим образом:
- переход в список Deployment (`:deploy`);
- выбор нужного Deployment;
- выполнение команды перезапуска (`r`).

Перезапуск осуществляется без изменения манифестов и без использования командного клиента `kubectl`.

## 5. Переключение между кластерами и пространствами имён
При работе с несколькими окружениями (например, тестовым и продуктивным) важно быстро переключаться между ними.

K9s поддерживает:
- переключение контекста Kubernetes (`:ctx`);
- переключение пространства имён (`:ns`).

Это снижает риск выполнения операций в неверном окружении и упрощает администрирование нескольких кластеров.
## 6. Мониторинг состояния ресурсов без дополнительных систем визуализации
В учебных или тестовых средах может отсутствовать развернутая система мониторинга.

K9s позволяет просматривать:
- текущее состояние pod’ов и нод;    
- потребление процессорного времени;
- использование оперативной памяти.

Информация обновляется в реальном времени и подходит для первичной оценки состояния кластера. При этом K9s не заменяет специализированные системы мониторинга, а дополняет их.

---
# Возможные проблемы

## Отсутствие ожидаемых ресурсов в интерфейсе K9s после успешного запуска
После успешного запуска Minikube и запуска K9s пользователь может не обнаружить ожидаемые pod’ы, сервисы или другие ресурсы в интерфейсе.

#### Причина
K9s отображает ресурсы Kubernetes в рамках:
- активного контекста;
- выбранного пространства имён.

По умолчанию используется пространство имён `default`.  
Ресурсы, размещённые в других пространствах имён (включая системные компоненты Kubernetes), в этом случае не отображаются.

### Решение
Рекомендуется:
- проверить активный контекст Kubernetes;
- убедиться в корректности выбранного пространства имён;
- при необходимости отобразить ресурсы из всех пространств имён.

Переключение контекста:
```bash
:ctx
```

Переключение пространства имён:
```bash
:ns
```

Отображение ресурсов из всех пространств имён:
```bash
0
```

После выполнения указанных действий ресурсы станут доступны для просмотра в интерфейсе K9s.
